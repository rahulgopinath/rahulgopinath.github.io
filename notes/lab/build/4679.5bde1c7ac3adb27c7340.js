"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[4679],{34679:(e,t,o)=>{o.r(t),o.d(t,{fileUploadStatus:()=>F,launcherToolbarButton:()=>x,default:()=>T});var r,n=o(52884),a=o(92005),i=o(5768),s=o(18599),c=o(86986),d=o(77994),l=o(7122),u=o(66122),m=o(74161),w=o(79487),p=o(58623),h=o(53268);!function(e){e.copy="filebrowser:copy",e.copyDownloadLink="filebrowser:copy-download-link",e.createLauncher="filebrowser:create-main-launcher",e.cut="filebrowser:cut",e.del="filebrowser:delete",e.download="filebrowser:download",e.duplicate="filebrowser:duplicate",e.hideBrowser="filebrowser:hide-main",e.goToPath="filebrowser:go-to-path",e.goUp="filebrowser:go-up",e.openPath="filebrowser:open-path",e.open="filebrowser:open",e.openBrowserTab="filebrowser:open-browser-tab",e.paste="filebrowser:paste",e.createNewDirectory="filebrowser:create-new-directory",e.createNewFile="filebrowser:create-new-file",e.createNewMarkdownFile="filebrowser:create-new-markdown-file",e.rename="filebrowser:rename",e.copyShareableLink="filebrowser:share-main",e.copyPath="filebrowser:copy-path",e.showBrowser="filebrowser:activate",e.shutdown="filebrowser:shutdown",e.toggleBrowser="filebrowser:toggle-main",e.toggleNavigateToCurrentDirectory="filebrowser:toggle-navigate-to-current-directory",e.toggleLastModified="filebrowser:toggle-last-modified",e.search="filebrowser:search",e.toggleHiddenFiles="filebrowser:toggle-hidden-files"}(r||(r={}));const f="filebrowser",g={id:"@jupyterlab/filebrowser-extension:browser",requires:[c.IFileBrowserFactory,m.ITranslator],optional:[n.ILayoutRestorer,d.ISettingRegistry,n.ITreePathUpdater,a.ICommandPalette],autoStart:!0,activate:async(e,t,o,n,s,c,d)=>{const l=o.load("jupyterlab"),u=t.defaultBrowser;n&&n.add(u,f);const m=i.PageConfig.getOption("preferredPath");m&&await u.model.cd(m),function(e,t,o,n,s){const c=o.load("jupyterlab"),{docRegistry:d,commands:l}=e,{defaultBrowser:u,tracker:m}=t;l.addCommand(r.del,{execute:()=>{const e=m.currentWidget;if(e)return e.delete()},icon:w.closeIcon.bindprops({stylesheet:"menuItem"}),label:c.__("Delete"),mnemonic:0}),l.addCommand(r.copy,{execute:()=>{const e=m.currentWidget;if(e)return e.copy()},icon:w.copyIcon.bindprops({stylesheet:"menuItem"}),label:c.__("Copy"),mnemonic:0}),l.addCommand(r.cut,{execute:()=>{const e=m.currentWidget;if(e)return e.cut()},icon:w.cutIcon.bindprops({stylesheet:"menuItem"}),label:c.__("Cut")}),l.addCommand(r.duplicate,{execute:()=>{const e=m.currentWidget;if(e)return e.duplicate()},icon:w.copyIcon.bindprops({stylesheet:"menuItem"}),label:c.__("Duplicate")}),l.addCommand(r.goToPath,{execute:async e=>{var n;const a=e.path||"",i=!(null!==(n=null==e?void 0:e.dontShowBrowser)&&void 0!==n&&n);try{if("directory"!==(await B.navigateToPath(a,t,o)).type&&i){const e=B.getBrowserForPath(a,t);if(e){e.clearSelectedItems();const t=a.split("/"),o=t[t.length-1];o&&await e.selectItemByName(o)}}}catch(e){console.warn(`${r.goToPath} failed to go to: ${a}`,e)}if(i)return l.execute(r.showBrowser,{path:a})}}),l.addCommand(r.goUp,{label:"go up",execute:async()=>{const e=B.getBrowserForPath("",t);if(!e)return;const{model:o}=e;if(await o.restored,o.path!==o.rootPath)try{await o.cd("..")}catch(e){console.warn(`${r.goUp} failed to go to parent directory of ${o.path}`,e)}}}),l.addCommand(r.openPath,{label:e=>e.path?c.__("Open %1",e.path):c.__("Open from Pathâ€¦"),caption:e=>e.path?c.__("Open %1",e.path):c.__("Open from path"),execute:async e=>{var o;let n;if(n=(null==e?void 0:e.path)?e.path:null!==(o=(await a.InputDialog.getText({label:c.__("Path"),placeholder:"/path/relative/to/jlab/root",title:c.__("Open Path"),okLabel:c.__("Open")})).value)&&void 0!==o?o:void 0,n)try{const o="/"!==n&&n.endsWith("/");o&&(n=n.slice(0,n.length-1));const a=B.getBrowserForPath(n,t),{services:i}=a.model.manager,s=await i.contents.get(n,{content:!1});if(o&&"directory"!==s.type)throw new Error(`Path ${n}/ is not a directory`);if(await l.execute(r.goToPath,{path:n,dontShowBrowser:e.dontShowBrowser}),"directory"===s.type)return;return l.execute("docmanager:open",{path:n})}catch(e){return e.response&&404===e.response.status&&(e.message=c.__("Could not find path: %1",n)),(0,a.showErrorMessage)(c.__("Cannot open"),e)}}}),s&&s.addItem({command:r.openPath,category:c.__("File Operations")}),l.addCommand(r.open,{execute:e=>{const t=e.factory||void 0,o=m.currentWidget;if(!o)return;const{contents:r}=o.model.manager.services;return Promise.all((0,p.toArray)((0,p.map)(o.selectedItems(),(e=>{if("directory"===e.type){const t=r.localPath(e.path);return o.model.cd(`/${t}`)}return l.execute("docmanager:open",{factory:t,path:e.path})}))))},icon:e=>{var t;const o=e.factory||void 0;if(o){const e=d.getFileType(o);return null===(t=null==e?void 0:e.icon)||void 0===t?void 0:t.bindprops({stylesheet:"menuItem"})}return w.folderIcon.bindprops({stylesheet:"menuItem"})},label:e=>e.label||e.factory||c.__("Open"),mnemonic:0}),l.addCommand(r.paste,{execute:()=>{const e=m.currentWidget;if(e)return e.paste()},icon:w.pasteIcon.bindprops({stylesheet:"menuItem"}),label:c.__("Paste"),mnemonic:0}),l.addCommand(r.createNewDirectory,{execute:()=>{const e=m.currentWidget;if(e)return e.createNewDirectory()},icon:w.newFolderIcon.bindprops({stylesheet:"menuItem"}),label:c.__("New Folder")}),l.addCommand(r.createNewFile,{execute:()=>{const e=m.currentWidget;if(e)return e.createNewFile({ext:"txt"})},icon:w.textEditorIcon.bindprops({stylesheet:"menuItem"}),label:c.__("New File")}),l.addCommand(r.createNewMarkdownFile,{execute:()=>{const e=m.currentWidget;if(e)return e.createNewFile({ext:"md"})},icon:w.markdownIcon.bindprops({stylesheet:"menuItem"}),label:c.__("New Markdown File")}),l.addCommand(r.rename,{execute:e=>{const t=m.currentWidget;if(t)return t.rename()},icon:w.editIcon.bindprops({stylesheet:"menuItem"}),label:c.__("Rename"),mnemonic:0}),l.addCommand(r.copyPath,{execute:()=>{const e=m.currentWidget;if(!e)return;const t=e.selectedItems().next();t&&a.Clipboard.copyToSystem(t.path)},isVisible:()=>!!m.currentWidget&&void 0!==m.currentWidget.selectedItems().next,icon:w.fileIcon.bindprops({stylesheet:"menuItem"}),label:c.__("Copy Path")}),l.addCommand(r.shutdown,{execute:()=>{const e=m.currentWidget;if(e)return e.shutdownKernels()},icon:w.stopIcon.bindprops({stylesheet:"menuItem"}),label:c.__("Shut Down Kernel")}),l.addCommand(r.toggleBrowser,{execute:()=>u.isHidden?l.execute(r.showBrowser,void 0):l.execute(r.hideBrowser,void 0)}),l.addCommand(r.createLauncher,{label:c.__("New Launcher"),execute:()=>B.createLauncher(l,u)}),n&&l.addCommand(r.toggleNavigateToCurrentDirectory,{label:c.__("Show Active File in File Browser"),isToggled:()=>u.navigateToCurrentDirectory,execute:()=>{const e=!u.navigateToCurrentDirectory;return n.set("@jupyterlab/filebrowser-extension:browser","navigateToCurrentDirectory",e).catch((e=>{console.error("Failed to set navigateToCurrentDirectory setting")}))}}),l.addCommand(r.toggleLastModified,{label:c.__("Show Last Modified Column"),isToggled:()=>u.showLastModifiedColumn,execute:()=>{const e=!u.showLastModifiedColumn;if(n)return n.set("@jupyterlab/filebrowser-extension:browser","showLastModifiedColumn",e).catch((e=>{console.error("Failed to set showLastModifiedColumn setting")}))}}),l.addCommand(r.toggleHiddenFiles,{label:c.__("Show Hidden Files"),isToggled:()=>u.showHiddenFiles,isVisible:()=>"true"===i.PageConfig.getOption("allow_hidden_files"),execute:()=>{const e=!u.showHiddenFiles;if(n)return n.set("@jupyterlab/filebrowser-extension:browser","showHiddenFiles",e).catch((e=>{console.error("Failed to set showHiddenFiles setting")}))}}),l.addCommand(r.search,{label:c.__("Search on File Names"),execute:()=>alert("search")}),s&&s.addItem({command:r.toggleNavigateToCurrentDirectory,category:c.__("File Operations")})}(e,t,o,s,d);const g=()=>{const t=(0,p.find)(e.commands.keyBindings,(e=>e.command===r.toggleBrowser));if(t){const e=h.CommandRegistry.formatKeystroke(t.keys.join(" "));u.title.caption=l.__("File Browser (%1)",e)}else u.title.caption=l.__("File Browser")};g(),e.commands.keyBindingChanged.connect((()=>{g()})),Promise.all([e.restored,u.model.restored]).then((()=>{c&&u.model.pathChanged.connect(((e,t)=>{c(t.newValue)}));let e=!1,t=!0,o=!0,r=!1;s&&s.load("@jupyterlab/filebrowser-extension:browser").then((n=>{n.changed.connect((t=>{e=t.get("navigateToCurrentDirectory").composite,u.navigateToCurrentDirectory=e})),e=n.get("navigateToCurrentDirectory").composite,u.navigateToCurrentDirectory=e,n.changed.connect((e=>{t=e.get("showLastModifiedColumn").composite,u.showLastModifiedColumn=t})),t=n.get("showLastModifiedColumn").composite,u.showLastModifiedColumn=t,n.changed.connect((e=>{o=e.get("useFuzzyFilter").composite,u.useFuzzyFilter=o})),o=n.get("useFuzzyFilter").composite,u.useFuzzyFilter=o,n.changed.connect((e=>{r=e.get("showHiddenFiles").composite,u.showHiddenFiles=r})),r=n.get("showHiddenFiles").composite,u.showHiddenFiles=r}))}))}},b={id:"@jupyterlab/filebrowser-extension:factory",provides:c.IFileBrowserFactory,requires:[s.IDocumentManager,m.ITranslator],optional:[l.IStateDB,n.IRouter,n.JupyterFrontEnd.ITreeResolver],activate:async(e,t,o,r,n,i)=>{const{commands:s}=e,d=new a.WidgetTracker({namespace:f}),l=(e,n={})=>{var a;const i=new c.FilterFileBrowserModel({translator:o,auto:null===(a=n.auto)||void 0===a||a,manager:t,driveName:n.driveName||"",refreshInterval:n.refreshInterval,state:null===n.state?void 0:n.state||r||void 0}),s=n.restore,l=new c.FileBrowser({id:e,model:i,restore:s,translator:o});return d.add(l),l},u=l("filebrowser",{auto:!1,restore:!1});return B.restoreBrowser(u,s,n,i),{createFileBrowser:l,defaultBrowser:u,tracker:d}}},y={id:"@jupyterlab/filebrowser-extension:download",requires:[c.IFileBrowserFactory,m.ITranslator],autoStart:!0,activate:(e,t,o)=>{const n=o.load("jupyterlab"),{commands:i}=e,{tracker:s}=t;i.addCommand(r.download,{execute:()=>{const e=s.currentWidget;if(e)return e.download()},icon:w.downloadIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Download")}),i.addCommand(r.copyDownloadLink,{execute:()=>{const e=s.currentWidget;if(e)return e.model.manager.services.contents.getDownloadUrl(e.selectedItems().next().path).then((e=>{a.Clipboard.copyToSystem(e)}))},icon:w.copyIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Copy Download Link"),mnemonic:0})}},v={id:"@jupyterlab/filebrowser-extension:widget",requires:[s.IDocumentManager,c.IFileBrowserFactory,m.ITranslator,n.ILabShell],autoStart:!0,activate:(e,t,o,n,a)=>{const{commands:i}=e,{defaultBrowser:s,tracker:c}=o,d=n.load("jupyterlab");s.node.setAttribute("role","region"),s.node.setAttribute("aria-label",d.__("File Browser Section")),s.title.icon=w.folderIcon,a.add(s,"left",{rank:100}),i.addCommand(r.showBrowser,{execute:e=>{const t=e.path||"",r=B.getBrowserForPath(t,o);if(r)if(s!==r){const e=["left","right"];for(const t of e){const e=a.widgets(t);let o=e.next();for(;o;){if(o.contains(r))return void a.activateById(o.id);o=e.next()}}}else a.activateById(s.id)}}),i.addCommand(r.hideBrowser,{execute:()=>{const e=c.currentWidget;e&&!e.isHidden&&a.collapseLeft()}}),a.restored.then((e=>{e.fresh&&"single-document"!==a.mode&&i.execute(r.showBrowser,void 0)})),Promise.all([e.restored,s.model.restored]).then((()=>{function e(){a.isEmpty("main")&&i.hasCommand("launcher:create")&&B.createLauncher(i,s)}a.layoutModified.connect((()=>{e()})),a.currentChanged.connect((async(e,a)=>{if(s.navigateToCurrentDirectory&&a.newValue){const{newValue:e}=a,i=t.contextForWidget(e);if(i){const{path:e}=i;try{await B.navigateToPath(e,o,n)}catch(t){console.warn(`${r.goToPath} failed to open: ${e}`,t)}}}})),e()}))}},I={id:"@jupyterlab/filebrowser-extension:share-file",requires:[c.IFileBrowserFactory,m.ITranslator],autoStart:!0,activate:(e,t,o)=>{const n=o.load("jupyterlab"),{commands:s}=e,{tracker:c}=t;s.addCommand(r.copyShareableLink,{execute:()=>{const e=c.currentWidget,t=null==e?void 0:e.selectedItems().next();t&&a.Clipboard.copyToSystem(i.PageConfig.getUrl({workspace:i.PageConfig.defaultWorkspace,treePath:t.path,toShare:!0}))},isVisible:()=>!!c.currentWidget&&1===(0,p.toArray)(c.currentWidget.selectedItems()).length,icon:w.linkIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Copy Shareable Link")})}},_={id:"@jupyterlab/filebrowser-extension:open-with",requires:[c.IFileBrowserFactory],autoStart:!0,activate:(e,t)=>{const{docRegistry:o}=e,{tracker:n}=t;e.contextMenu.opened.connect((function(e){var t,a;const i=null!==(a=null===(t=e.menu.items.find((e=>{var t;return"submenu"===e.type&&"jp-contextmenu-open-with"===(null===(t=e.submenu)||void 0===t?void 0:t.id)})))||void 0===t?void 0:t.submenu)&&void 0!==a?a:null;i&&(i.clearItems(),(n.currentWidget?B.OpenWith.intersection((0,p.map)(n.currentWidget.selectedItems(),(e=>B.OpenWith.getFactories(o,e)))):new Set).forEach((e=>{i.addItem({args:{factory:e},command:r.open})})))}))}},C={id:"@jupyterlab/filebrowser-extension:open-browser-tab",requires:[c.IFileBrowserFactory,m.ITranslator],autoStart:!0,activate:(e,t,o)=>{const{commands:n}=e,a=o.load("jupyterlab"),{tracker:i}=t;n.addCommand(r.openBrowserTab,{execute:()=>{const e=i.currentWidget;if(e)return Promise.all((0,p.toArray)((0,p.map)(e.selectedItems(),(e=>n.execute("docmanager:open-browser-tab",{path:e.path})))))},icon:w.addIcon.bindprops({stylesheet:"menuItem"}),label:a.__("Open in New Browser Tab"),mnemonic:0})}},F={id:"@jupyterlab/filebrowser-extension:file-upload-status",autoStart:!0,requires:[c.IFileBrowserFactory,m.ITranslator],optional:[u.IStatusBar],activate:(e,t,o,r)=>{if(!r)return;const n=new c.FileUploadStatus({tracker:t.tracker,translator:o});r.registerStatusItem("@jupyterlab/filebrowser-extension:file-upload-status",{item:n,align:"middle",isActive:()=>!!n.model&&n.model.items.length>0,activeStateChanged:n.model.stateChanged})}},x={id:"@jupyterlab/filebrowser-extension:launcher-toolbar-button",autoStart:!0,requires:[c.IFileBrowserFactory,m.ITranslator],activate:(e,t,o)=>{const{commands:r}=e,n=o.load("jupyterlab"),{defaultBrowser:i}=t,s=new a.ToolbarButton({icon:w.addIcon,onClick:()=>{if(r.hasCommand("launcher:create"))return B.createLauncher(r,i)},tooltip:n.__("New Launcher"),actualOnClick:!0});i.toolbar.insertItem(0,"launch",s)}};var B;!function(e){e.createLauncher=function(e,t){const{model:o}=t;return e.execute("launcher:create",{cwd:o.path}).then((e=>(o.pathChanged.connect((()=>{e.content&&(e.content.cwd=o.path)}),e),e)))},e.getBrowserForPath=function(e,t){const{defaultBrowser:o,tracker:n}=t,a=o.model.manager.services.contents.driveName(e);if(a){return n.find((e=>e.model.driveName===a))||void console.warn(`${r.goToPath} failed to find filebrowser for path: ${e}`)}return o},e.navigateToPath=async function(t,o,r){const n=r.load("jupyterlab"),a=e.getBrowserForPath(t,o);if(!a)throw new Error(n.__("No browser for path"));const{services:s}=a.model.manager,c=s.contents.localPath(t);await s.ready;const d=await s.contents.get(t,{content:!1}),{model:l}=a;return await l.restored,"directory"===d.type?await l.cd(`/${c}`):await l.cd(`/${i.PathExt.dirname(c)}`),d},e.restoreBrowser=async function(e,t,o,n){const a="jp-mod-restoring";if(e.addClass(a),!o)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(a);const i=async()=>{o.routed.disconnect(i);const s=await(null==n?void 0:n.paths);(null==s?void 0:s.file)||(null==s?void 0:s.browser)?(await e.model.restore(e.id,!1),s.file&&await t.execute(r.openPath,{path:s.file,dontShowBrowser:!0}),s.browser&&await t.execute(r.openPath,{path:s.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(a)};o.routed.connect(i)}}(B||(B={}));const T=[b,g,I,F,y,v,x,_,C];!function(e){let t;!function(e){e.getFactories=function(e,t){var o;const r=e.preferredWidgetFactories(t.path).map((e=>e.name)),n=null===(o=e.getWidgetFactory("notebook"))||void 0===o?void 0:o.name;return n&&"notebook"===t.type&&-1===r.indexOf(n)&&r.unshift(n),r},e.intersection=function(e){const t=e.next();if(!t)return new Set;const o=new Set(t);return(0,p.reduce)(e,((e,t)=>new Set(t.filter((t=>e.has(t))))),o)}}(t=e.OpenWith||(e.OpenWith={}))}(B||(B={}))}}]);
//# sourceMappingURL=4679.5bde1c7ac3adb27c7340.js.map